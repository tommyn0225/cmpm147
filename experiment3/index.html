<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Experiment 3 – Grid World & Dungeon</title>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js"
    crossorigin="anonymous"
  ></script>
  <style>
    /* side-by-side layout */
    #generators {
      display: flex;
      gap: 1rem;
    }
    #generators > section {
      flex: 1;
    }
    textarea {
      font-family: monospace;
      white-space: pre;
      width: 100%;
      box-sizing: border-box;
    }
    #description {
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <h1>Experiment 3 – Grid World & Dungeon</h1>

  <div id="generators">
    <!-- Overworld -->
    <section id="overworld">
      <h2>Overworld Generator</h2>
      <button id="reseedWorld">Reseed</button>
      <span id="seedReportWorld">seed 0</span>
      <textarea id="asciiBoxWorld" rows="20" cols="30"></textarea>
      <div id="canvasContainerWorld"></div>
    </section>

    <!-- Dungeon -->
    <section id="dungeon">
      <h2>Dungeon Generator</h2>
      <button id="reseedDungeon">Reseed</button>
      <span id="seedReportDungeon">seed 0</span>
      <textarea id="asciiBoxDungeon" rows="20" cols="30"></textarea>
      <div id="canvasContainerDungeon"></div>
    </section>
  </div>

  <div id="description">
    <main id="content">
      <section>
        <h1>Experiment 2 – Landscape Generator</h1>
  
        <!-- generator card -->
        <div class="minor-section">
          <div id="box" class="quote-box"></div>
        </div>
      <section id="project-info">
        <div class="minor-section">
          <h2>Description</h2>
          <p>Built two procedural generators side-by-side—an overworld and a dungeon—each driven by its own seed so every “reseed” produces a unique map.</p>
          <p>The overworld uses Perlin noise to paint grass and water tiles, then applies a bitmask to wrap cliffs smoothly around water bodies.</p>
          <p>The dungeon generator carves out a central chamber, hallways in four directions, and small end rooms, then places one random door and up to two chests per seed.</p>
        </div>

        <div class="minor-section">
          <h2>Technical</h2>
          <p>Built both generators in a single <code>project.js</code> using p5.js instance mode so each canvas has its own scoped state but shares one tileset image. The overworld uses Perlin noise to assign “w” (water) or “g” (grass) per cell, animates water frames via a time-based noise third dimension, and applies a 4-bit neighbor bitmask to auto-tile cliff edges.</p>
          <p>The dungeon generator maintains a 2D grid of “_” (wall) and “.” (floor), carves a central chamber, four directional corridors, and small end rooms, then runs a 16-entry lookup table to choose wall tile variants. After carving it randomly picks one north-facing wall as a door and up to two floor cells as chests, overlaying their sprites on top.</p>
          <p>Both generators synchronize an ASCII <code>&lt;textarea&gt;</code> (rows×cols) with the canvas drawing and expose “Reseed” buttons that increment the seed by a constant, re-generate the map, and update the seed display for perfect reproducibility.</p>
        </div>

        <div class="minor-section">
          <h2>Reflection</h2>
          <p>Juggling two p5 instances in one file was a great lesson in encapsulating state and lifecycle methods—each sketch needed its own <code>setup()</code>, <code>draw()</code>, and event listeners without cross-talk. Sharing a single tileset import kept asset loading efficient.</p>
          <p>Implementing the dungeon’s autotile bitmask and lookup table proved the trickiest: mapping each of the 16 neighbor combinations to the right sprite and ensuring doors and chests didn’t overlap required careful conditional ordering. Synchronizing the ASCII editor with the visual canvas also reinforced best practices for live UI feedback.</p>
          <p>Overall this project deepened my understanding of procedural map design, seed-based reproducibility, and how to build interactive tooling for live map inspection and export.</p>
        </div>

      </section>

      </section>
  
      <nav id="links" class="minor-section">
        <ul><li><a href="../index.html">Home</a></li></ul>
      </nav>
    </main>    <p>
      This experiment shows two procedural generators side-by-side. On the left is the overworld noise-based world; on the right is a hub-and-corridor dungeon with random rooms, doors, and chests.
    </p>
  </div>

  <script src="js/project.js" defer></script>
  <script src="js/dungeon.js" defer></script>
</body>
</html>
